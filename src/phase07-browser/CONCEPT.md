# æµè§ˆå™¨åŸç†æ·±å…¥è§£æ

## ğŸ“Œ ä¸€ã€æµè§ˆå™¨æ¶æ„

### 1. å¤šè¿›ç¨‹æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Chrome æµè§ˆå™¨                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   è´Ÿè´£æµè§ˆå™¨ç•Œé¢ã€æ ‡ç­¾é¡µç®¡ç†ã€                   â”‚
â”‚  â”‚ æµè§ˆå™¨è¿›ç¨‹    â”‚   ç½‘ç»œè¯·æ±‚ã€å­˜å‚¨ã€è¿›ç¨‹é—´é€šä¿¡                     â”‚
â”‚  â”‚ (Browser)    â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   è´Ÿè´£ GPU ä»»åŠ¡                                â”‚
â”‚  â”‚  GPU è¿›ç¨‹    â”‚   å¤„ç†æ¥è‡ªå¤šä¸ªè¿›ç¨‹çš„æ¸²æŸ“è¯·æ±‚                     â”‚
â”‚  â”‚              â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   è´Ÿè´£ç½‘ç»œè¯·æ±‚                                 â”‚
â”‚  â”‚  ç½‘ç»œè¿›ç¨‹    â”‚                                               â”‚
â”‚  â”‚              â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ æ¸²æŸ“è¿›ç¨‹ 1   â”‚  â”‚ æ¸²æŸ“è¿›ç¨‹ 2   â”‚  â”‚ æ¸²æŸ“è¿›ç¨‹ N   â”‚          â”‚
â”‚  â”‚  (Tab 1)    â”‚  â”‚  (Tab 2)    â”‚  â”‚  (Tab N)    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚  æ’ä»¶è¿›ç¨‹ 1  â”‚  â”‚  æ’ä»¶è¿›ç¨‹ N  â”‚                            â”‚
â”‚  â”‚              â”‚  â”‚              â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ¸²æŸ“è¿›ç¨‹å†…éƒ¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ¸²æŸ“è¿›ç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     ä¸»çº¿ç¨‹                           â”‚   â”‚
â”‚  â”‚  â€¢ è§£æ HTML/CSS/JS                                  â”‚   â”‚
â”‚  â”‚  â€¢ æ‰§è¡Œ JavaScript                                   â”‚   â”‚
â”‚  â”‚  â€¢ è®¡ç®—æ ·å¼å’Œå¸ƒå±€                                    â”‚   â”‚
â”‚  â”‚  â€¢ ç”Ÿæˆç»˜åˆ¶æŒ‡ä»¤                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ åˆæˆçº¿ç¨‹     â”‚  â”‚ å…‰æ …åŒ–çº¿ç¨‹   â”‚  â”‚  IO çº¿ç¨‹     â”‚     â”‚
â”‚  â”‚ Compositor  â”‚  â”‚   Raster    â”‚  â”‚              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Œ äºŒã€é¡µé¢æ¸²æŸ“æµç¨‹

### 1. å®Œæ•´æ¸²æŸ“æµæ°´çº¿

```
    ç½‘ç»œè¯·æ±‚                              å±å¹•æ˜¾ç¤º
        â”‚                                    â†‘
        â†“                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                           â”‚
â”‚   HTML          CSS           JavaScript                  â”‚
â”‚    â†“             â†“               â†“                        â”‚
â”‚  è§£æHTML     è§£æCSS         è§£ææ‰§è¡Œ                    â”‚
â”‚    â†“             â†“                                        â”‚
â”‚ DOM Tree    CSSOM Tree                                    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚           â†“                                               â”‚
â”‚      Render Tree (æ ·å¼è®¡ç®—)                               â”‚
â”‚           â†“                                               â”‚
â”‚        Layout (å¸ƒå±€/å›æµ)                                 â”‚
â”‚           â†“                                               â”‚
â”‚        Paint (ç»˜åˆ¶)                                       â”‚
â”‚           â†“                                               â”‚
â”‚       Composite (åˆæˆ)                                    â”‚
â”‚           â†“                                               â”‚
â”‚      Display (æ˜¾ç¤º)                                       â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ¯ä¸ªé˜¶æ®µè¯¦è§£

```
1. æ„å»º DOM Tree
   HTML å­—èŠ‚æµ â†’ å­—ç¬¦ â†’ Token â†’ Node â†’ DOM Tree

2. æ„å»º CSSOM Tree
   CSS å­—èŠ‚æµ â†’ å­—ç¬¦ â†’ Token â†’ Node â†’ CSSOM Tree

3. æ„å»º Render Tree
   DOM Tree + CSSOM Tree â†’ Render Tree
   (ä¸åŒ…å«ä¸å¯è§å…ƒç´ ï¼šdisplay:none, head, script)

4. Layout (å¸ƒå±€/å›æµ)
   è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å‡ ä½•ä¿¡æ¯ï¼šä½ç½®ã€å¤§å°

5. Paint (ç»˜åˆ¶)
   ç”Ÿæˆç»˜åˆ¶æŒ‡ä»¤åˆ—è¡¨

6. Composite (åˆæˆ)
   åˆ†å±‚ã€å…‰æ …åŒ–ã€åˆæˆæ˜¾ç¤º
```

### 3. é˜»å¡è¡Œä¸º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è§£æé˜»å¡è¡Œä¸º                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  CSS é˜»å¡:                                                  â”‚
â”‚  â€¢ CSS ä¸é˜»å¡ DOM è§£æ                                      â”‚
â”‚  â€¢ CSS é˜»å¡ Render Tree æ„å»º                                â”‚
â”‚  â€¢ CSS é˜»å¡åç»­ JS æ‰§è¡Œ                                     â”‚
â”‚                                                             â”‚
â”‚  JS é˜»å¡:                                                   â”‚
â”‚  â€¢ JS é˜»å¡ DOM è§£æ (åŒæ­¥è„šæœ¬)                              â”‚
â”‚  â€¢ async: ä¸‹è½½ä¸é˜»å¡ï¼Œæ‰§è¡Œé˜»å¡                              â”‚
â”‚  â€¢ defer: ä¸‹è½½ä¸é˜»å¡ï¼ŒDOMContentLoaded å‰æ‰§è¡Œ               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<script src="a.js"></script>         <!-- é˜»å¡ -->
<script async src="b.js"></script>   <!-- å¼‚æ­¥ä¸‹è½½ï¼Œç«‹å³æ‰§è¡Œ -->
<script defer src="c.js"></script>   <!-- å¼‚æ­¥ä¸‹è½½ï¼Œå»¶è¿Ÿæ‰§è¡Œ -->
```

---

## ğŸ“Œ ä¸‰ã€é‡æ’ä¸é‡ç»˜

### 1. æ¦‚å¿µ

```
é‡æ’ (Reflow/Layout):
  å…ƒç´ å‡ ä½•å±æ€§å˜åŒ–ï¼Œéœ€è¦é‡æ–°è®¡ç®—å¸ƒå±€

é‡ç»˜ (Repaint):
  å…ƒç´ å¤–è§‚å˜åŒ–ï¼Œä¸å½±å“å¸ƒå±€ï¼Œåªéœ€è¦é‡æ–°ç»˜åˆ¶

åˆæˆ (Composite):
  åªè§¦å‘åˆæˆï¼Œä¸éœ€è¦é‡æ’é‡ç»˜
```

### 2. è§¦å‘æ¡ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     æ“ä½œç±»å‹     â”‚              è§¦å‘çš„æµç¨‹                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                                         â”‚
â”‚ å‡ ä½•å±æ€§å˜åŒ–:    â”‚   Layout â†’ Paint â†’ Composite            â”‚
â”‚ width, height   â”‚   (é‡æ’ â†’ é‡ç»˜ â†’ åˆæˆ)                  â”‚
â”‚ margin, padding â”‚                                         â”‚
â”‚ top, left       â”‚                                         â”‚
â”‚ display         â”‚                                         â”‚
â”‚ font-size       â”‚                                         â”‚
â”‚                 â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                                         â”‚
â”‚ å¤–è§‚å±æ€§å˜åŒ–:    â”‚   Paint â†’ Composite                    â”‚
â”‚ color           â”‚   (é‡ç»˜ â†’ åˆæˆ)                         â”‚
â”‚ background      â”‚                                         â”‚
â”‚ visibility      â”‚                                         â”‚
â”‚ box-shadow      â”‚                                         â”‚
â”‚                 â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚                                         â”‚
â”‚ transform       â”‚   Composite                             â”‚
â”‚ opacity         â”‚   (åªåˆæˆï¼Œæœ€é«˜æ•ˆ)                       â”‚
â”‚ filter          â”‚                                         â”‚
â”‚                 â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ä¼˜åŒ–ç­–ç•¥

```javascript
// âŒ å¼ºåˆ¶åŒæ­¥å¸ƒå±€
element.style.width = '100px';
const width = element.offsetWidth;  // å¼ºåˆ¶åŒæ­¥å¸ƒå±€
element.style.height = '100px';

// âœ… æ‰¹é‡è¯»å–ï¼Œæ‰¹é‡å†™å…¥
const width = element.offsetWidth;  // è¯»
const height = element.offsetHeight; // è¯»

element.style.width = '100px';  // å†™
element.style.height = '100px'; // å†™

// âœ… ä½¿ç”¨ transform æ›¿ä»£ä½ç½®å±æ€§
// å·®: è§¦å‘é‡æ’
element.style.left = element.offsetLeft + 10 + 'px';

// å¥½: åªè§¦å‘åˆæˆ
element.style.transform = 'translateX(10px)';

// âœ… ä½¿ç”¨ requestAnimationFrame
function animate() {
  element.style.transform = `translateX(${x}px)`;
  x += 1;
  requestAnimationFrame(animate);
}

// âœ… ä½¿ç”¨ will-change æç¤ºæµè§ˆå™¨
.element {
  will-change: transform;
}
```

---

## ğŸ“Œ å››ã€V8 å¼•æ“

### 1. V8 æ‰§è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     V8 æ‰§è¡Œæµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  JavaScript æºä»£ç                                           â”‚
â”‚        â†“                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚    Parser    â”‚  è§£æå™¨ï¼šç”Ÿæˆ AST                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚        â†“                                                    â”‚
â”‚      AST (æŠ½è±¡è¯­æ³•æ ‘)                                       â”‚
â”‚        â†“                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚   Ignition   â”‚  è§£é‡Šå™¨ï¼šç”Ÿæˆå­—èŠ‚ç å¹¶æ‰§è¡Œ                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚        â†“                                                    â”‚
â”‚    Bytecode (å­—èŠ‚ç )                                        â”‚
â”‚        â†“                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚  TurboFan    â”‚  ä¼˜åŒ–ç¼–è¯‘å™¨ï¼šçƒ­ç‚¹ä»£ç  JIT ç¼–è¯‘            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚        â†“                                                    â”‚
â”‚  Optimized Machine Code (ä¼˜åŒ–åçš„æœºå™¨ç )                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. JIT ä¼˜åŒ–ä¸åä¼˜åŒ–

```
çƒ­ç‚¹ä»£ç æ£€æµ‹:
  å‡½æ•°è¢«å¤šæ¬¡è°ƒç”¨ â†’ æ ‡è®°ä¸ºçƒ­ç‚¹ä»£ç  â†’ TurboFan ä¼˜åŒ–ç¼–è¯‘

åä¼˜åŒ– (Deoptimization):
  ä¼˜åŒ–å‡è®¾å¤±æ•ˆ â†’ å›é€€åˆ°å­—èŠ‚ç è§£é‡Šæ‰§è¡Œ

å¸¸è§å¯¼è‡´åä¼˜åŒ–çš„æƒ…å†µ:
  1. ç±»å‹å˜åŒ– (Hidden Class å˜åŒ–)
  2. å‡½æ•°å‚æ•°ç±»å‹å˜åŒ–
  3. ä½¿ç”¨ try-catch
  4. ä½¿ç”¨ eval
```

### 3. Hidden Class

```javascript
// âœ… è‰¯å¥½å®è·µï¼šå±æ€§æ·»åŠ é¡ºåºä¸€è‡´
function Point(x, y) {
  this.x = x; // åˆ›å»º Hidden Class C0
  this.y = y; // è½¬æ¢åˆ° Hidden Class C1
}

// âŒ ä¸è‰¯å®è·µï¼šåŠ¨æ€æ·»åŠ å±æ€§
const obj = {};
obj.a = 1; // Hidden Class å˜åŒ–
obj.b = 2; // Hidden Class å˜åŒ–
obj.c = 3; // Hidden Class å˜åŒ–

// âŒ ä¸è‰¯å®è·µï¼šåˆ é™¤å±æ€§
delete obj.a; // å¯¼è‡´ Hidden Class é€€åŒ–
```

---

## ğŸ“Œ äº”ã€åƒåœ¾å›æ”¶

### 1. åˆ†ä»£å›æ”¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        V8 å†…å­˜ç»“æ„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    æ–°ç”Ÿä»£ (Young Generation)        â”‚   â”‚
â”‚  â”‚  â€¢ å­˜å‚¨æ–°åˆ›å»ºçš„å¯¹è±¡                                  â”‚   â”‚
â”‚  â”‚  â€¢ ç©ºé—´å° (1-8MB)                                   â”‚   â”‚
â”‚  â”‚  â€¢ ä½¿ç”¨ Scavenge ç®—æ³•                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚  â”‚  â”‚  From ç©ºé—´ (æ´»è·ƒ)   â”‚   To ç©ºé—´ (ç©ºé—²)   â”‚       â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    è€ç”Ÿä»£ (Old Generation)          â”‚   â”‚
â”‚  â”‚  â€¢ å­˜å‚¨é•¿æœŸå­˜æ´»çš„å¯¹è±¡                                â”‚   â”‚
â”‚  â”‚  â€¢ ç©ºé—´å¤§                                           â”‚   â”‚
â”‚  â”‚  â€¢ ä½¿ç”¨ Mark-Sweep + Mark-Compact ç®—æ³•              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. å›æ”¶ç®—æ³•

```
Scavenge (æ–°ç”Ÿä»£):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. å­˜æ´»å¯¹è±¡ä» From ç©ºé—´å¤åˆ¶åˆ° To ç©ºé—´                    â”‚
â”‚  2. äº¤æ¢ From å’Œ To                                      â”‚
â”‚  3. ç»è¿‡ä¸¤æ¬¡ Scavenge ä»å­˜æ´»çš„å¯¹è±¡æ™‹å‡åˆ°è€ç”Ÿä»£            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mark-Sweep (è€ç”Ÿä»£):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ ‡è®°é˜¶æ®µï¼šä»æ ¹å¯¹è±¡éå†ï¼Œæ ‡è®°å¯è¾¾å¯¹è±¡                  â”‚
â”‚  2. æ¸…é™¤é˜¶æ®µï¼šå›æ”¶æœªæ ‡è®°çš„å¯¹è±¡                            â”‚
â”‚  3. ç¼ºç‚¹ï¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mark-Compact (è€ç”Ÿä»£æ•´ç†):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ ‡è®°é˜¶æ®µï¼šåŒ Mark-Sweep                              â”‚
â”‚  2. æ•´ç†é˜¶æ®µï¼šå°†å­˜æ´»å¯¹è±¡ç§»åŠ¨åˆ°å†…å­˜ä¸€ç«¯ï¼Œæ¶ˆé™¤ç¢ç‰‡          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Œ å…­ã€å†…å­˜æ³„æ¼

### 1. å¸¸è§å†…å­˜æ³„æ¼åœºæ™¯

```javascript
// 1. æ„å¤–çš„å…¨å±€å˜é‡
function leak() {
  leakedVar = "global"; // æœªå£°æ˜ï¼Œæˆä¸ºå…¨å±€å˜é‡
}

// 2. é—å¿˜çš„å®šæ—¶å™¨
const timer = setInterval(() => {
  doSomething();
}, 1000);
// å¿˜è®° clearInterval(timer)

// 3. è„±ç¦» DOM çš„å¼•ç”¨
const elements = {
  button: document.querySelector("#button"),
};
document.body.removeChild(document.querySelector("#button"));
// elements.button ä»ç„¶å¼•ç”¨å·²åˆ é™¤çš„ DOM

// 4. é—­åŒ…
function outer() {
  const largeData = new Array(1000000);
  return function inner() {
    // inner æŒæœ‰å¯¹ largeData çš„å¼•ç”¨
  };
}
const leak = outer();

// 5. äº‹ä»¶ç›‘å¬å™¨
element.addEventListener("click", handler);
// å…ƒç´ ç§»é™¤æ—¶æœª removeEventListener
```

### 2. æ’æŸ¥æ–¹æ³•

```
Chrome DevTools:

1. Memory é¢æ¿
   â€¢ Heap Snapshot: æŸ¥çœ‹å†…å­˜å¿«ç…§
   â€¢ Allocation instrumentation: è¿½è¸ªå†…å­˜åˆ†é…
   â€¢ Allocation sampling: é‡‡æ ·åˆ†æ

2. Performance é¢æ¿
   â€¢ è®°å½•å†…å­˜æ—¶é—´çº¿
   â€¢ è§‚å¯Ÿå†…å­˜å¢é•¿è¶‹åŠ¿

æ’æŸ¥æ­¥éª¤:
1. æ‹æ‘„åˆå§‹å †å¿«ç…§
2. æ‰§è¡Œæ€€ç–‘æ³„æ¼çš„æ“ä½œ
3. æ‹æ‘„æ–°çš„å †å¿«ç…§
4. å¯¹æ¯”ä¸¤ä¸ªå¿«ç…§ï¼Œæ‰¾å‡ºå¢é•¿çš„å¯¹è±¡
5. åˆ†æå¼•ç”¨é“¾ (Retaining path)
```

### 3. é¢„é˜²æªæ–½

```javascript
// 1. ä½¿ç”¨ let/const
let local = "not global";

// 2. æ¸…ç†å®šæ—¶å™¨
const timer = setInterval(fn, 1000);
// ç»„ä»¶é”€æ¯æ—¶
clearInterval(timer);

// 3. ä½¿ç”¨ WeakMap/WeakSet
const cache = new WeakMap();
cache.set(element, data);
// element è¢«ç§»é™¤æ—¶ï¼Œcache ä¸­çš„æ¡ç›®è‡ªåŠ¨æ¸…é™¤

// 4. ç§»é™¤äº‹ä»¶ç›‘å¬
element.addEventListener("click", handler);
// æ¸…ç†æ—¶
element.removeEventListener("click", handler);

// 5. è§£é™¤é—­åŒ…å¼•ç”¨
function outer() {
  let largeData = new Array(1000000);
  return function inner() {
    const result = process(largeData);
    largeData = null; // ä½¿ç”¨åè§£é™¤å¼•ç”¨
    return result;
  };
}
```

---

## ğŸ“š æ¨èå­¦ä¹ èµ„æº

| èµ„æº             | é“¾æ¥                            |
| ---------------- | ------------------------------- |
| Chrome DevTools  | developers.google.com/web/tools |
| V8 Blog          | v8.dev                          |
| Web Fundamentals | web.dev                         |

---
